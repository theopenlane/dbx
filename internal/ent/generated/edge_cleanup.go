// Code generated by ent, DO NOT EDIT.

package generated

import (
	"context"

	"github.com/rs/zerolog/log"
	"github.com/theopenlane/dbx/internal/ent/generated/database"
	"github.com/theopenlane/dbx/internal/ent/generated/group"
)

func DatabaseEdgeCleanup(ctx context.Context, id string) error {

	return nil
}

func GroupEdgeCleanup(ctx context.Context, id string) error {

	if exists, err := FromContext(ctx).Database.Query().Where((database.HasGroupWith(group.ID(id)))).Exist(ctx); err == nil && exists {
		if databaseCount, err := FromContext(ctx).Database.Delete().Where(database.HasGroupWith(group.ID(id))).Exec(ctx); err != nil {
			log.Debug().Err(err).Int("count", databaseCount).Msg("deleting database")
			return err
		}
	}

	return nil
}
